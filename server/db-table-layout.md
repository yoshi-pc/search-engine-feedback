# Database's table layout
## クライアントから送信されて保存する情報
クライアントから送信され、リモートに保存する情報は以下の通り。利用規約で規定しているため、余計な情報は保存できない。
また、メンテナンス性も加味した構造にする必要がある。(Indexを作るなど。)

全てのtextデータは`utf8mb4_unicode_ci`で保存することとする。

- データID：インデックスとなるデータ内で一意なID (int, `AUTO_INCREMENT`)
- 検索クエリ：検索に使った単語群 (text)
- URL：閲覧したページのURL (text)
- 検索順位：閲覧したページが結果の何番目に表示されていたか (int)
- クリック座標: ページ閲覧のためにクリックした時のマウスカーソルの座標 (x = int, y = int)
- 評価値：ユーザーが直接投票した評価 (int)
- 日時：データが送信された日時 (timestamp, デフォルト値 = `CURRENT_TIMESTAMP`)
- 送信元IPアドレス：ユーザーがデータを送信した際のリモートIPアドレス (text)

## サーバーサイドで別途作成する情報
クライアントから送信された情報を基に、サーバー側で作成するデータは以下のようなものを検討している。

- 送信されたURL先のスクリーンショット
    - クライアントから直接送信されると個人情報が含まれる可能性があるため、リモート側で別途取得する。
    - Forbiddenなどで拒否される可能性があるが、そういった場合は省く。
    - 送信された日時とこのステップの日時が大きく離れると、評価時との内容の一貫性が保証できなくなるので、定期的にこの処理を行う必要がある。

## サーバーサイドの構成
~~現状では、拡張性や汎用性などを考えたところ、Google Cloud SQLで送信された情報を扱って、Google Cloud Storageでスクリーンショットなどをオブジェクトとして管理する形を想定している。~~
使い慣れた環境でひとまずデータをプールするために、手持ちのレンタルサーバーでデータを処理する。
